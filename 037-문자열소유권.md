# 문자열 소유권
좋Rust의 문자열 소유권(Ownership) 개념 설명.

## 🧠 Rust의 문자열 소유권 개념
### 🔹 기본 원칙
- 모든 값은 **소유자(owner)**가 있다.
- 한 시점에 하나의 소유자만 존재할 수 있다.
- 소유자가 스코프를 벗어나면 값은 자동으로 drop된다.

### 🔸 문자열 리터럴 vs String
| 구분           | 저장 위치 | 가변성     | 소유권     | 메모리 해제 방식 | 주요 용도                     |
|----------------|------------|------------|------------|------------------|-------------------------------|
| `&str`         | 스택 (또는 힙 참조) | ❌ 불변     | 없음 (참조만 함) | 자동 (스코프 종료 시) | 리터럴 문자열, 빠른 참조용     |
| `String`       | 힙         | ✅ 가변     | 있음       | 자동 (`drop` 호출됨) | 동적 문자열 생성 및 조작       |


## 🧪 예제 흐름 설명
### ✅ 스코프 기반 소유권
```rust
fn main() {
    {
        let s = "hello"; // s는 &str, 스코프 안에서만 유효
    }
    println!("{}", s); // ❌ 에러! s는 스코프를 벗어남
}
```

➡️ 변수 s는 블록 안에서만 유효하며, 블록을 벗어나면 메모리에서 제거됨.

### ✅ 값 복사 vs 소유권 이동
```rust
let x = 3;
let y = x; // x는 Copy 타입 → 값 복사
println!("x = {x}, y = {y}"); // 둘 다 사용 가능


let s1 = String::from("Hello");
let s2 = s1; // 소유권 이동 → s1은 무효화
println!("s2 = {s2}");
// println!("s1 = {s1}"); // ❌ 에러! s1은 더 이상 유효하지 않음
```


➡️ String은 힙에 저장되므로 소유권이 이동되면 원본은 사용할 수 없어요.

✅ 복사해서 둘 다 사용하고 싶다면
let s1 = String::from("Hello");
let s2 = s1.clone(); // 깊은 복사
println!("s1 = {s1}, s2 = {s2}"); // 둘 다 사용 가능


➡️ clone()은 힙 데이터를 복사해서 소유권을 유지합니다.

## ✅ 소유권 이전이 잘 안 보이는 경우
```rust
let mut user_input = String::from("jhjeong");
let greeting = user_input + " Hello!!!!"; // 소유권 이동 발생
// println!("{}", user_input); // ❌ 에러! 이미 소유권을 잃음
```

➡️ + 연산은 String의 소유권을 넘기므로 원본은 더 이상 사용할 수 없습니다.
let greeting = user_input2.clone() + "Hello!!!!"; // 복사 후 연결
println!("{}", user_input2); // ✅ 여전히 사용 가능



## 📋 문자열 소유권 요약표
| 상황                        | 결과                                | 설명                                      |
|-----------------------------|-------------------------------------|-------------------------------------------|
| `let s = "hello";`          | `&str` 타입, 스택 참조              | 불변, 소유권 없음                         |
| `let s = String::from("hi")`| `String` 타입, 힙 저장              | 가변, 소유권 있음                         |
| `let s2 = s1;`              | 소유권 이동                         | s1은 더 이상 사용 불가                    |
| `let s2 = s1.clone();`      | 깊은 복사                          | s1과 s2 모두 사용 가능    


---
