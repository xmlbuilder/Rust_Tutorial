# as
Rust의 as 키워드는 **타입 캐스팅(type casting)**을 명시적으로 수행할 때 사용되며, 특히 기본 타입 간의 변환에서 자주 쓰입니다.  
하지만 as는 단순하면서도 주의할 점이 많은 도구.

## 🧠 as 키워드란?
- Rust는 암묵적 타입 변환을 허용하지 않음
- as는 명시적 타입 변환을 수행하는 키워드
- 주로 숫자 타입 간 변환, char → u32, 포인터 변환 등에 사용됨

## 🔍 예제 분석
```rust
fn string_to_digit(input: String) -> i32 {
    let mut ret = 0;
    for c in input.chars() {
        ret = ret * 10;
        ret += c as i32 - '0' as i32;
    }
    ret
}
```

### 동작 원리
- c as i32: char 타입을 i32로 변환 → 유니코드 코드 포인트 값을 반환
- '0' as i32: 문자 '0'의 코드 포인트는 48
- 따라서 '5' as i32 - '0' as i32는 53 - 48 = 5

## 문제점
```
let str = String::from("jhjeong");
```

- 이 문자열은 숫자가 아닌 문자로 구성되어 있음
- 예: 'j' as i32 - '0' as i32 = 106 - 48 = 58 → 의도한 숫자 변환이 아님
- 결과적으로 string_to_digit("jhjeong")는 의미 없는 숫자를 반환함

## ⚠️ as 사용 시 주의사항
| 항목                      | 설명                                      |
|---------------------------|-------------------------------------------|
| `as`                      | 명시적 타입 변환 키워드                    |
| `300u32 as u8 = 44`       | 오버플로우 발생 → 300은 u8 범위 초과, 값 잘림 |
| `f64 as i32`              | 소수점 이하 잘림 → 반올림 아님             |
| `char as i32`             | 유니코드 코드 포인트로 변환됨              |
| `as` vs `From/Into/TryFrom` | `as`는 안전성 낮음, `TryFrom`은 오류 처리 가능 |


### ✅ 안전한 대안
- TryFrom / TryInto를 사용하면 범위 체크와 오류 처리 가능:
```rust
use std::convert::TryFrom;

fn safe_char_to_digit(c: char) -> Option<u32> {
    if c.is_ascii_digit() {
        Some(u32::try_from(c as u32 - '0' as u32).ok()?)
    } else {
        None
    }
}
```

### 개선안
```rust
fn string_to_digit(input: &str) -> i32 {
    let mut ret = 0;
    for c in input.chars() {
        if c.is_ascii_digit() {
            ret = ret * 10 + (c as i32 - '0' as i32);
        }
    }
    ret
}

fn main() {
    let input = "12a4";
    let result = string_to_digit(input);
    println!("Parsed number: {}", result); // 출력: 124
}
```


## 📌 핵심 요약
| 표현           | 타입 또는 기능     | 결과 또는 설명     |
|----------------|--------------------|---------------------|
| `c as i32`     | `char`             | `'5'` → `53` (유니코드 코드 포인트) |
| `'0' as i32`   | `char`             | `'0'` → `48`        |
| `as`           | 명시적 타입 변환   | 안전성 낮음, 오버플로우 가능성 있음 |
| `TryFrom`      | 안전한 타입 변환   | `Result` 반환, 오류 처리 가능 |

---




