# Rust 구조 설계
Rust 프로젝트를 처음 설계할 때 main.rs, lib.rs, src/bin, workspace 같은 구조가 헷갈릴 수 있음.
하지만 이걸 잘 잡아두면 이후 확장성과 유지보수성이 훨씬 좋아짐.

## 🧱 1. 기본 구조: main.rs vs lib.rs
Rust는 하나의 프로젝트에서 **실행 파일(binary)**과 **라이브러리(lib)**를 동시에 만들 수 있습니다.
```
project/
├── Cargo.toml
└── src/
    ├── main.rs      # 실행 진입점
    └── lib.rs       # 재사용 가능한 로직 (모듈화된 기능)
```

### 🧱 Rust 프로젝트 기본 구조 요약
| 파일명     | 설명                                                   |
|------------|--------------------------------------------------------|
| `main.rs`  | 프로그램의 진입점. `fn main()` 함수가 포함되어 실행을 담당함     |
| `lib.rs`   | 재사용 가능한 기능을 정의하는 라이브러리. `pub fn`, `mod`로 구성되고 `main.rs`에서 호출 가능 |

### 💡 권장 전략:
- 핵심 로직은 lib.rs에 작성
- main.rs는 lib.rs의 기능을 호출하는 역할만 수행

## 🧩 2. 여러 실행 파일: src/bin
프로젝트에 여러 실행 파일이 필요할 경우 src/bin/ 디렉토리를 사용합니다.
```
project/
├── src/
│   ├── lib.rs
│   ├── main.rs
│   └── bin/
│       ├── cli.rs
│       └── server.rs
```

### 🚀 실행 파일 구성 요약
| 파일 경로         | 설명                                                   |
|-------------------|--------------------------------------------------------|
| `main.rs`         | 기본 실행 파일. `cargo run` 시 실행되는 진입점 (`fn main()`) |
| `bin/cli.rs`      | 별도의 실행 파일. CLI 도구 또는 명령어 기반 앱에 사용         |
| `bin/server.rs`   | 또 다른 실행 파일. 서버 앱이나 백엔드 로직에 사용             |


### 💡 실행 방법:
```
cargo run --bin cli
cargo run --bin server
```

## 🧰 3. 라이브러리 중심 설계: lib.rs 모듈화
lib.rs는 기능을 모듈로 나눠서 관리할 수 있습니다.
```rust
// src/lib.rs
pub mod math;
pub mod utils;


// src/math.rs
pub fn add(a: i32, b: i32) -> i32 {
    a + b
}


// src/utils.rs
pub fn greet(name: &str) -> String {
    format!("Hello, {}!", name)
}
```

### 💡 main.rs에서 사용:
```
use project_name::math::add;
use project_name::utils::greet;
```


## 🧭 4. 대규모 프로젝트: Workspace 설계
여러 개의 프로젝트를 하나로 묶고 싶다면 Workspace를 사용합니다.\
```
my_workspace/
├── Cargo.toml         # workspace 설정
├── sdk/               # 라이브러리 crate
│   ├── Cargo.toml
│   └── src/lib.rs
├── cli/               # CLI 실행 crate
│   ├── Cargo.toml
│   └── src/main.rs
└── server/            # 서버 실행 crate
    ├── Cargo.toml
    └── src/main.rs
```

### ✅ 루트 Cargo.toml 설정 예시
```
[workspace]
members = ["sdk", "cli", "server"]

```

## 💡 장점:
- 모든 crate를 한 번에 빌드/테스트 가능 (cargo build, cargo test)
- 종속성 버전 통일 (Cargo.lock 공유)
- 모듈 간 참조가 쉬움 (sdk를 cli에서 use sdk::...)

## 🧠 추천 설계 흐름 
- 단일 프로젝트로 시작 → main.rs + lib.rs 구조
- 기능이 많아지면 → lib.rs에 mod로 분리
- 실행 파일이 늘어나면 → src/bin에 파일 추가
- 프로젝트가 나뉘면 → Workspace로 확장 (sdk, cli, server 등)

---



