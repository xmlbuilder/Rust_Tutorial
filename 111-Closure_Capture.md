ì¢‹ì•„ìš” JungHwanë‹˜, ì£¼ì‹  ì½”ë“œì™€ ì´ë¯¸ì§€ ì† ë‚´ìš©, ê·¸ë¦¬ê³  ì—ëŸ¬ ë©”ì‹œì§€ê¹Œì§€ ëª¨ë‘ ì¢…í•©í•´ì„œ
**Rust í´ë¡œì €ì˜ í™˜ê²½ ìº¡ì²˜(Closure Environment Capture)**ì— ëŒ€í•œ ë¬¸ì„œë¥¼ ì •ë¦¬í•´ ë“œë¦´ê²Œìš”.

## ğŸ“š Rust í´ë¡œì €ì˜ í™˜ê²½ ìº¡ì²˜ ì •ë¦¬
### 1. í´ë¡œì €(Closure)ë€?
- ìµëª… í•¨ìˆ˜ë¡œ, ë³€ìˆ˜ì— ì €ì¥í•˜ê±°ë‚˜ ë‹¤ë¥¸ í•¨ìˆ˜ì— ì¸ìë¡œ ì „ë‹¬ ê°€ëŠ¥
- í™˜ê²½ ìº¡ì²˜ ê¸°ëŠ¥ì„ í†µí•´, ì •ì˜ëœ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°Â·ë³€ê²½Â·ì†Œìœ  ê°€ëŠ¥
- í•¨ìˆ˜ì™€ ë‹¬ë¦¬ ì™¸ë¶€ ë³€ìˆ˜ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ì´ í•µì‹¬ ì°¨ì´ì 


#### ì‚¬ìš©ë²•
```rust
fn main() {
    let multiplier = 5;
    let func = |x: i32| -> i32 { x * multiplier };
    for i in 1..=5 {
        println!("{}", func(i));
    }
    println!("{}", multiplier); // ğŸ‘

}
```

#### ì¶œë ¥ ê²°ê³¼
```
5
10
15
20
25
5
```

### 2. í™˜ê²½ ìº¡ì²˜ ë°©ì‹
| ìº¡ì²˜ ë°©ì‹ | í‚¤ì›Œë“œ | ì˜ˆì‹œ ì½”ë“œ |
|-----------|--------|-----------|
| `&T` (ë¶ˆë³€ ì°¸ì¡°) | ì—†ìŒ   | `let c = || println!("{}", x);` |
| `&mut T` (ê°€ë³€ ì°¸ì¡°) | ì—†ìŒ   | `let mut c = || x += 1;` |
| `T` (ì†Œìœ ê¶Œ ì´ë™) | `move` | `let c = move || println!("{}", x);` |


### 3. í•¨ìˆ˜ì™€ í´ë¡œì €ì˜ ì°¨ì´
- í´ë¡œì €: ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ìº¡ì²˜ ê°€ëŠ¥
- ì¼ë°˜ í•¨ìˆ˜: ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ì§ì ‘ ìº¡ì²˜ ë¶ˆê°€
#### âœ… í´ë¡œì €ëŠ” ê°€ëŠ¥
```rust
fn main() {
    let x = 4;
    let equal_to_x = |z| z == x;
    let y = 4;
    assert!(equal_to_x(y));
}
```

#### âŒ í•¨ìˆ˜ëŠ” ë¶ˆê°€ëŠ¥ (ì»´íŒŒì¼ ì—ëŸ¬)
```rust
fn main() {
    let x = 4;
    fn equal_to_x(z: i32) -> bool { z == x } // error[E0434]
    let y = 4;
    assert!(equal_to_x(y));
}
```


### 4. move í‚¤ì›Œë“œì™€ ì†Œìœ ê¶Œ ì´ë™
- moveë¥¼ ì‚¬ìš©í•˜ë©´ ë³€ìˆ˜ì˜ ì†Œìœ ê¶Œì„ í´ë¡œì €ë¡œ ì´ë™
- ì£¼ë¡œ ìŠ¤ë ˆë“œë¡œ ë°ì´í„° ì´ë™ ì‹œ ì‚¬ìš©
- ì´ë™ëœ ë³€ìˆ˜ëŠ” ì›ë˜ ìŠ¤ì½”í”„ì—ì„œ ë” ì´ìƒ ì‚¬ìš© ë¶ˆê°€
```rust
fn main() {
    let x = vec![1, 2, 3];
    let equal_to_x = move |z| z == x;
    // println!("{:?}", x); // âŒ ì†Œìœ ê¶Œì´ ì´ë™ë˜ì–´ ì‚¬ìš© ë¶ˆê°€
    let y = vec![1, 2, 3];
    assert!(equal_to_x(y));
}
```


### 5. ì‚¬ìš© ê°€ëŠ¥ ì˜ˆì‹œ (ì†Œìœ ê¶Œ ì´ë™ ì—†ì´)
```rust
fn main() {
    let x = vec![1, 2, 3];
    let equal_to_x = |z| z == x; // ì°¸ì¡°ë¡œ ìº¡ì²˜
    println!("{:?}", x); // âœ… ì—¬ì „íˆ ì‚¬ìš© ê°€ëŠ¥
    let y = vec![1, 2, 3];
    assert!(equal_to_x(y));
}
```


### 6. í´ë¡œì € ìº¡ì²˜ ì‹œ ì£¼ì˜í•  ì 
- ë©”ëª¨ë¦¬ ì˜¤ë²„í—¤ë“œ: ìº¡ì²˜í•œ ë³€ìˆ˜ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ ì¶”ê°€ ë©”ëª¨ë¦¬ ì‚¬ìš©
- íƒ€ì… ê³ ì •: í´ë¡œì €ëŠ” ìµœì´ˆ í˜¸ì¶œ ì‹œ íƒ€ì…ì´ ê³ ì •ë¨
- ì†Œìœ ê¶Œ ê·œì¹™: move ì‚¬ìš© ì‹œ ì›ë˜ ìŠ¤ì½”í”„ì—ì„œ ë³€ìˆ˜ ì‚¬ìš© ë¶ˆê°€
- ë©€í‹°ìŠ¤ë ˆë“œ: moveì™€ Send/Sync íŠ¸ë ˆì‡ ì¡°í•© í•„ìš”

### 7. ê´€ë ¨ ì—ëŸ¬ ì‚¬ë¡€
| ì—ëŸ¬ ì½”ë“œ | í‚¤ì›Œë“œ | ì˜ˆì‹œ ì½”ë“œ |
|-----------|--------|-----------|
| E0434     | ì—†ìŒ   | `fn equal_to_x(z: i32) -> bool { z == x }` |
| E0382     | move   | `println!("{:?}", x)` |


### 8. í•µì‹¬ ìš”ì•½
- í´ë¡œì €ëŠ” í•¨ìˆ˜ë³´ë‹¤ ê°•ë ¥í•œ ì´ìœ : í™˜ê²½ ìº¡ì²˜ ê°€ëŠ¥
- ìº¡ì²˜ ë°©ì‹: &T(ë¶ˆë³€), &mut T(ê°€ë³€), T(ì†Œìœ ê¶Œ ì´ë™)
- move í‚¤ì›Œë“œ: ì†Œìœ ê¶Œì„ í´ë¡œì €ë¡œ ì´ë™, ì£¼ë¡œ ìŠ¤ë ˆë“œ ì‘ì—…ì— í™œìš©
- í•¨ìˆ˜ëŠ” í™˜ê²½ ìº¡ì²˜ ë¶ˆê°€ â†’ ì˜¤ë²„í—¤ë“œ ì—†ìŒ
- ìº¡ì²˜ ë°©ì‹ì— ë”°ë¼ ì†Œìœ ê¶Œê³¼ ë¹Œë¦¼ ê·œì¹™ì´ ë‹¬ë¼ì§

--- 

## Fn / FnMut / FnOnce

ì•ì„œ ì •ë¦¬í•œ í™˜ê²½ ìº¡ì²˜ ë°©ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ, Rustì˜ Fn / FnMut / FnOnce íŠ¸ë ˆì‡ê³¼ ë§¤í•‘í•œ í‘œ.
| íŠ¸ë ˆì‡      | ìº¡ì²˜ ë°©ì‹        | í‚¤ì›Œë“œ | íŠ¹ì§• |
|-------------|-----------------|--------|------|
| `Fn`        | `&T` (ë¶ˆë³€ ì°¸ì¡°) | ì—†ìŒ   | ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ì½ê¸° ì „ìš©ìœ¼ë¡œ ìº¡ì²˜, ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œ ê°€ëŠ¥ |
| `FnMut`     | `&mut T` (ê°€ë³€ ì°¸ì¡°) | ì—†ìŒ   | ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ìˆ˜ì • ê°€ëŠ¥í•˜ê²Œ ìº¡ì²˜, í˜¸ì¶œ ì‹œ ê°€ë³€ ëŒ€ì—¬ í•„ìš” |
| `FnOnce`    | `T` (ì†Œìœ ê¶Œ ì´ë™) | `move` | ì™¸ë¶€ ë³€ìˆ˜ì˜ ì†Œìœ ê¶Œì„ ê°€ì ¸ì™€ ìº¡ì²˜, í•œ ë²ˆë§Œ í˜¸ì¶œ ê°€ëŠ¥ (ì†Œìœ ê¶Œ ì†Œë¹„) |



## ğŸ“Œ ì´í•´ í¬ì¸íŠ¸
- Fn â†’ ì½ê¸° ì „ìš© ìº¡ì²˜, ê°€ì¥ ì œí•œì´ ì ê³  ì¬í˜¸ì¶œ ê°€ëŠ¥
- FnMut â†’ ê°€ë³€ ì°¸ì¡° ìº¡ì²˜, í˜¸ì¶œ ì‹œë§ˆë‹¤ ê°€ë³€ ëŒ€ì—¬ í•„ìš”
- FnOnce â†’ ì†Œìœ ê¶Œ ì´ë™ ìº¡ì²˜, í•œ ë²ˆë§Œ í˜¸ì¶œ ê°€ëŠ¥ (ê°’ì„ ì†Œë¹„í•˜ê¸° ë•Œë¬¸)


fn main() {
    println!("=== Fn (ë¶ˆë³€ ì°¸ì¡° ìº¡ì²˜) ===");
    fn_example();

    println!("\n=== FnMut (ê°€ë³€ ì°¸ì¡° ìº¡ì²˜) ===");
    fnmut_example();

    println!("\n=== FnOnce (ì†Œìœ ê¶Œ ì´ë™ ìº¡ì²˜) ===");
    fnonce_example();
}

### Fn: ë¶ˆë³€ ì°¸ì¡° ìº¡ì²˜
```rust
fn fn_example() {
    let multiplier = 5;
    let func = |x: i32| x * multiplier; // ë¶ˆë³€ ì°¸ì¡°ë¡œ multiplier ìº¡ì²˜
    println!("func(2) = {}", func(2)); // 10
    println!("func(3) = {}", func(3)); // 15
    println!("multiplier ì—¬ì „íˆ ì‚¬ìš© ê°€ëŠ¥: {}", multiplier); // 5
}
```

### FnMut: ê°€ë³€ ì°¸ì¡° ìº¡ì²˜
```rust
fn fnmut_example() {
    let mut multiplier = 5;
    let mut func = |x: i32| {
        multiplier += 1; // ê°€ë³€ ì°¸ì¡°ë¡œ multiplier ìº¡ì²˜
        x * multiplier
    };
    println!("func(2) = {}", func(2)); // multiplier = 6 â†’ 12
    println!("func(3) = {}", func(3)); // multiplier = 7 â†’ 21
    println!("multiplier ìµœì¢… ê°’: {}", multiplier); // 7
}
```

### FnOnce: ì†Œìœ ê¶Œ ì´ë™ ìº¡ì²˜
```rust
fn fnonce_example() {
    let numbers = vec![1, 2, 3];
    let consume = move |x: i32| {
        println!("Captured vec: {:?}", numbers);
        x * 2
    };
    println!("consume(5) = {}", consume(5)); // 10
    // println!("{:?}", numbers); // âŒ ì†Œìœ ê¶Œ ì´ë™ìœ¼ë¡œ ì‚¬ìš© ë¶ˆê°€
}
```

---
