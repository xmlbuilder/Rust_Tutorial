# Smart Pointer
Rustμ Smart Pointer κ°λ…μ²΄κ³„μ μΌλ΅ μ •λ¦¬.

π§  κΈ°λ³Έ κ°λ…: ν¬μΈν„° vs μ¤λ§νΈ ν¬μΈν„°

| ν•­λ©               | ν¬μΈν„°                                      | μ¤λ§νΈ ν¬μΈν„°                                               |
|--------------------|---------------------------------------------|--------------------------------------------------------------|
| μ •μ               | λ©”λ¨λ¦¬ μ£Όμ†λ¥Ό λ‹΄κ³  μλ” λ³€μ                | ν¬μΈν„°μ²λΌ μ‘λ™ν•μ§€λ§ λ©”νƒ€λ°μ΄ν„°μ™€ κΈ°λ¥μ„ ν¬ν•¨ν• κµ¬μ΅°μ²΄      |
| λ€ν‘ μμ‹          | `&T`, `*const T`, `*mut T`                  | `Box<T>`, `Rc<T>`, `RefCell<T>`, `Arc<T>`                    |
| μ†μ κ¶             | μ—†μ (λΉλ¦Όλ§ κ°€λ¥)                         | λ€λ¶€λ¶„ μ†μ κ¶μ„ κ°€μ§                                         |
| λ©”λ¨λ¦¬ ν•΄μ         | μλ™ λλ” μ°Έμ΅°μ μ¤μ½”ν”„ μΆ…λ£ μ‹ μλ™       | `Drop` νΈλ μ‡μΌλ΅ μ»¤μ¤ν„°λ§μ΄μ§• κ°€λ¥                          |
| μ°Έμ΅°μμ²λΌ μ‚¬μ© κ°€λ¥| κΈ°λ³Έμ μΌλ΅ κ°€λ¥                             | `Deref` νΈλ μ‡μ„ ν†µν•΄ μ°Έμ΅°μμ²λΌ λ™μ‘                        |
| κΈ°λ¥ ν™•μ¥μ„±        | μ ν•μ                                      | λ‚΄λ¶€ κ°€λ³€μ„±, μ°Έμ΅° μΉ΄μ΄ν…, λ™μ  λ””μ¤ν¨μΉ λ“± λ‹¤μ–‘ν• κΈ°λ¥ μ κ³µ  |



## π§° μ¤λ§νΈ ν¬μΈν„°μ ν•µμ‹¬ νΉμ§•
- μΌλ°μ μΌλ΅ κµ¬μ΅°μ²΄λ΅ κµ¬ν„λ¨
- Deref νΈλ μ‡μ„ κµ¬ν„ν•μ—¬ μ°Έμ΅°μμ²λΌ λ™μ‘ κ°€λ¥
- Drop νΈλ μ‡μ„ κµ¬ν„ν•μ—¬ μ¤μ½”ν”„ μΆ…λ£ μ‹ μλ™ μ •λ¦¬ κ°€λ¥
- μ°Έμ΅°μ(&T)λ” λΉλ¦Όλ§ κ°€λ¥ν•μ§€λ§, μ¤λ§νΈ ν¬μΈν„°λ” μ†μ κ¶μ„ κ°€μ§ μ μμ

## π” Deref νΈλ μ‡ μμ  λ¶„μ„
```rust
use std::ops::Deref;

struct DerefExample<T> {
    _value: T,
}

impl<T> Deref for DerefExample<T> {
    type Target = T;
    fn deref(&self) -> &Self::Target {
        &self._value
    }
}

fn main() {
    let x = DerefExample { _value: 5 };
    assert_eq!(*x, 5);           // *x β†’ x.deref() β†’ &5
    assert_eq!(x.deref(), &5);   // μ§μ ‘ deref νΈμ¶
}
```



- *xλ” μλ™μΌλ΅ Deref νΈλ μ‡μ„ νΈμ¶ν•μ—¬ &x._valueλ΅ λ³€ν™λ¨
- μ΄ λ•λ¶„μ— μ¤λ§νΈ ν¬μΈν„°λ” μ°Έμ΅°μμ²λΌ μμ—°μ¤λ½κ² μ‚¬μ©λ  μ μμ

## π“¦ μ£Όμ” μ¤λ§νΈ ν¬μΈν„° μΆ…λ¥

| μ¤λ§νΈ ν¬μΈν„°   | μ„¤λ…                                                                 |
|------------------|----------------------------------------------------------------------|
| `Box<T>`         | κ°’μ„ ν™μ— μ €μ¥ν•κ³ , μ¤νƒμ—λ” ν¬μΈν„°λ§ λ‚¨κΉ€. μ¬κ·€ νƒ€μ…μ΄λ‚ ν° λ°μ΄ν„°μ— μ ν•© |
| `Rc<T>`          | μ°Έμ΅° μΉ΄μ΄ν…μ„ ν†µν•΄ λ³µμμ μ†μ μλ¥Ό ν—μ©. λ‹¨μΌ μ¤λ λ“ ν™κ²½μ—μ„ μ‚¬μ©         |
| `RefCell<T>`     | λ‚΄λ¶€ κ°€λ³€μ„±μ„ μ κ³µ. λ°νƒ€μ„μ— λΉλ¦Ό κ·μΉ™μ„ κ²€μ‚¬ν•λ©° `borrow()`λ΅ μ ‘κ·Ό         |
| `Arc<T>`         | `Rc<T>`μ λ©€ν‹°μ¤λ λ“ λ²„μ „. μ›μμ  μ°Έμ΅° μΉ΄μ΄ν…μΌλ΅ μ¤λ λ“ κ°„ μ•μ „ν• κ³µμ  κ°€λ¥ |



## π§ μμ‹: Boxλ¥Ό ν™μ©ν• μ¬κ·€ νƒ€μ…
```rust
enum List {
    Cons(i32, Box<List>),
    Nil,
}
```

- Box<List>λ¥Ό μ‚¬μ©ν•¨μΌλ΅μ¨ **λ¬΄ν• ν¬κΈ° μ—λ¬(E0072)**λ¥Ό ν”Όν•  μ μμ
- Boxλ” κ³ μ •λ ν¬κΈ°μ ν¬μΈν„°μ΄λ―€λ΅ μ»΄νμΌλ¬κ°€ νƒ€μ… ν¬κΈ°λ¥Ό μ¶”λ΅  κ°€λ¥


## β… μ¤λ§νΈ ν¬μΈν„° ν•µμ‹¬ μ”μ•½

| ν•­λ©               | μ„¤λ…                                                             |
|--------------------|------------------------------------------------------------------|
| ν¬μΈν„°             | λ©”λ¨λ¦¬ μ£Όμ†λ§ κ°€μ§. μ°Έμ΅°μ(`&T`)λ” λΉλ¦Όλ§ κ°€λ¥                   |
| μ¤λ§νΈ ν¬μΈν„°      | ν¬μΈν„° + λ©”νƒ€λ°μ΄ν„° + κΈ°λ¥ (μ†μ κ¶, μλ™ ν•΄μ  λ“±)                |
| Deref νΈλ μ‡       | μ¤λ§νΈ ν¬μΈν„°λ¥Ό μ°Έμ΅°μμ²λΌ μ‚¬μ©ν•  μ μκ² ν•΄μ¤                   |
| Drop νΈλ μ‡        | μ¤μ½”ν”„ μΆ…λ£ μ‹ μλ™ μ •λ¦¬ λ΅μ§μ„ μ»¤μ¤ν„°λ§μ΄μ§• κ°€λ¥                 |
| μ£Όμ” νƒ€μ…          | `Box<T>`, `Rc<T>`, `RefCell<T>`, `Arc<T>`                         |


