# ë¹„ë™ê¸° í•¨ìˆ˜ í…ŒìŠ¤íŠ¸

## ğŸš€ ë¹„ë™ê¸° í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ë€?
RustëŠ” async/await ë¬¸ë²•ì„ í†µí•´ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ Rust ìì²´ì—ëŠ” ë¹„ë™ê¸° ëŸ°íƒ€ì„ì´ ì—†ê¸° ë•Œë¬¸ì—, ì‹¤ì œ ì‹¤í–‰ì„ ìœ„í•´ì„œëŠ” Tokio ê°™ì€ ì™¸ë¶€ ëŸ°íƒ€ì„ì´ í•„ìš”í•©ë‹ˆë‹¤.

## âœ… ë¹„ë™ê¸° í•¨ìˆ˜ ì •ì˜
```rust
async fn give_order(order: u64) -> u64 {
    println!("Processing {order}...");
    tokio::time::sleep(std::time::Duration::from_secs(3 - order)).await;
    println!("Finished {order}!");
    order
}
```

- async fn: ë¹„ë™ê¸° í•¨ìˆ˜ ì„ ì–¸
- tokio::time::sleep(...): ë¹„ë™ê¸° ì§€ì—° (await í•„ìš”)
- await: Futureê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼

## âœ… í…ŒìŠ¤íŠ¸ ëª¨ë“ˆ
```rust
#[cfg(test)]
mod tests {
    use super::*;

    #[tokio::test]
    async fn test_give_order() {
        let result = give_order(1).await;
        assert_eq!(result, 1);
    }
}
```

- #[cfg(test)]: í…ŒìŠ¤íŠ¸ ì‹œì—ë§Œ ì»´íŒŒì¼
- #[tokio::test]: ë¹„ë™ê¸° í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ Tokio ë§¤í¬ë¡œ
- async fn test_give_order(): í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ë„ ë¹„ë™ê¸°
- await: ë¹„ë™ê¸° í•¨ìˆ˜ í˜¸ì¶œ í›„ ê²°ê³¼ ê¸°ë‹¤ë¦¼
- assert_eq!: ê²°ê³¼ ê²€ì¦

### âš™ï¸ #[tokio::test]ì˜ ì—­í• 
TokioëŠ” #[tokio::test] ë§¤í¬ë¡œë¥¼ í†µí•´
í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ì— ìë™ìœ¼ë¡œ ëŸ°íƒ€ì„ì„ ìƒì„±í•´ì¤ë‹ˆë‹¤.

### âœ… ë‚´ë¶€ì ìœ¼ë¡œ í•˜ëŠ” ì¼
- Tokio ëŸ°íƒ€ì„ì„ ìƒì„± (Runtime::new())
- í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ì˜ async fnì„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ì„¤ì •
- ë³µì¡í•œ ì„¤ì • ì—†ì´ ê°„ë‹¨í•˜ê²Œ ë¹„ë™ê¸° í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

### ğŸ“Œ ë¹„ë™ê¸° í…ŒìŠ¤íŠ¸ ì‹œ ì£¼ì˜í•  ì 

| í•­ëª©               | ì„¤ëª…                                                                 |
|--------------------|----------------------------------------------------------------------|
| `#[tokio::test]`   | `async fn` í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•œ Tokio ëŸ°íƒ€ì„ ë§¤í¬ë¡œ                     |
| `#[test] async fn` | ì¼ë°˜ `#[test]`ëŠ” `async fn`ê³¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ì—†ìŒ                        |
| `await`            | ë¹„ë™ê¸° í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ë°˜ë“œì‹œ `.await`ë¡œ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë ¤ì•¼ í•¨                  |
| `.await`           | Futureë¥¼ ì™„ë£Œì‹œì¼œ ì‹¤ì œ ê°’ì„ ë°˜í™˜ë°›ëŠ” í‚¤ì›Œë“œ                              |
| `tokio`            | ë¹„ë™ê¸° ì‹¤í–‰ì„ ìœ„í•œ ëŸ°íƒ€ì„. `Cargo.toml`ì— ëª…ì‹œì ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•¨          |
| `Cargo.toml tokio features = ["full"]` | Tokioì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì„¤ì •. í…ŒìŠ¤íŠ¸ì— `time`, `macros` ë“±ì´ í•„ìš”í•¨ |


# Cargo.toml ì˜ˆì‹œ
```
[dependencies]
tokio = { version = "1", features = ["full"] }
```


ğŸ§© ë¹„ë™ê¸° í…ŒìŠ¤íŠ¸ ìš”ì•½
| êµ¬ì„± ìš”ì†Œ         | ì„¤ëª…                                      |
|------------------|-------------------------------------------|
| `async fn`       | ë¹„ë™ê¸° í•¨ìˆ˜ ì •ì˜                            |
| `.await`         | Future ì™„ë£Œê¹Œì§€ ê¸°ë‹¤ë¦¼                      |
| `#[tokio::test]` | ë¹„ë™ê¸° í…ŒìŠ¤íŠ¸ ì‹¤í–‰ì„ ìœ„í•œ ëŸ°íƒ€ì„ ìë™ ìƒì„±     |
| `assert_eq!`     | ê²°ê³¼ ê²€ì¦                                  |
| `tokio::time::sleep` | ë¹„ë™ê¸° ì§€ì—° í•¨ìˆ˜ (í…ŒìŠ¤íŠ¸ ì‹œ ì‹œê°„ ì œì–´ ê°€ëŠ¥) |

---



