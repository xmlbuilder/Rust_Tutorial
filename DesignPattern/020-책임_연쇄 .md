# Chain Of Responsibility

##  ì±…ì„ ì—°ì‡„ íŒ¨í„´ì´ë€?
- ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì—¬ëŸ¬ ê°ì²´(Handler)ë¥¼ ì²´ì¸ìœ¼ë¡œ ì—°ê²°
- ê° ê°ì²´ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•˜ê±°ë‚˜ ë‹¤ìŒ ê°ì²´ë¡œ ë„˜ê¹€
- ê²°í•©ë„ë¥¼ ë‚®ì¶”ê³ , ìœ ì—°í•œ ì²˜ë¦¬ íë¦„ì„ ì œê³µ

## ğŸ¦€ Rust ê¸°ë°˜ ì˜ˆì œ
Rustì—ì„œëŠ” ìƒì†ì´ ì—†ê¸° ë•Œë¬¸ì— íŠ¸ë ˆì´íŠ¸ì™€ êµ¬ì¡°ì²´ ì¡°í•©ìœ¼ë¡œ íŒ¨í„´ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

### ğŸ”¹ êµ¬ì¡°
- Handler: ì²˜ë¦¬ ì¸í„°í˜ì´ìŠ¤ (íŠ¸ë ˆì´íŠ¸)
- ConcreteHandler: ì‹¤ì œ ì²˜ë¦¬ì
- Request: ìš”ì²­ ê°ì²´
- main(): ì²´ì¸ êµ¬ì„± ë° ì‹¤í–‰
### ğŸ§© ì½”ë“œ ì˜ˆì‹œ
```rust
struct Request {
    level: u32,
}

trait Handler {
    fn set_next(&mut self, next: Box<dyn Handler>);
    fn handle(&self, req: &Request);
}

struct LevelOne {
    next: Option<Box<dyn Handler>>,
}

impl LevelOne {
    fn new() -> Self {
        LevelOne { next: None }
    }
}

impl Handler for LevelOne {
    fn set_next(&mut self, next: Box<dyn Handler>) {
        self.next = Some(next);
    }

    fn handle(&self, req: &Request) {
        if req.level <= 1 {
            println!("LevelOne ì²˜ë¦¬: level {}", req.level);
        } else if let Some(ref next) = self.next {
            next.handle(req);
        } else {
            println!("ì²˜ë¦¬í•  ìˆ˜ ì—†ìŒ: level {}", req.level);
        }
    }
}

struct LevelTwo {
    next: Option<Box<dyn Handler>>,
}

impl LevelTwo {
    fn new() -> Self {
        LevelTwo { next: None }
    }
}

impl Handler for LevelTwo {
    fn set_next(&mut self, next: Box<dyn Handler>) {
        self.next = Some(next);
    }

    fn handle(&self, req: &Request) {
        if req.level <= 2 {
            println!("LevelTwo ì²˜ë¦¬: level {}", req.level);
        } else if let Some(ref next) = self.next {
            next.handle(req);
        } else {
            println!("ì²˜ë¦¬í•  ìˆ˜ ì—†ìŒ: level {}", req.level);
        }
    }
}

fn main() {
    let mut h1 = LevelOne::new();
    let mut h2 = LevelTwo::new();

    h1.set_next(Box::new(h2));

    let req = Request { level: 2 };
    h1.handle(&req);
}
```

### ğŸ” ì½”ë“œ ì›ë¬¸
```rust
else if let Some(ref next) = self.next {
    next.handle(req);
}
```

### ğŸ§  ì„¤ëª…
- self.nextëŠ” Option<Box<dyn Handler>> íƒ€ì…ì´ì•¼. ì¦‰, ë‹¤ìŒ í•¸ë“¤ëŸ¬ê°€ ìˆì„ ìˆ˜ë„ ìˆê³  ì—†ì„ ìˆ˜ë„ ìˆìŒ.
- if let Some(ref next) = self.nextëŠ” self.nextê°€ Some(...)ì¼ ë•Œë§Œ nextë¥¼ êº¼ë‚´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” íŒ¨í„´ ë§¤ì¹­ ë¬¸ë²•.
- ref nextëŠ” Box<dyn Handler>ì— ëŒ€í•œ ë¶ˆë³€ ì°¸ì¡°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê±°ì•¼. ê·¸ë˜ì„œ next.handle(req)ë¥¼ í˜¸ì¶œ í•  ìˆ˜ ìˆìŒ.

### âœ… ì™œ ì´ë ‡ê²Œ ì¨ì•¼ í•´?
RustëŠ” Option íƒ€ì…ì„ ì§ì ‘ êº¼ë‚´ë ¤ë©´ matchë‚˜ if letì„ ì¨ì•¼ í•¨.
ì´ë ‡ê²Œ í•˜ë©´ Noneì¼ ê²½ìš° ì•ˆì „í•˜ê²Œ ë¬´ì‹œí•˜ê³ , Someì¼ ê²½ìš°ë§Œ handle()ì„ í˜¸ì¶œ.
ì¦‰, ì´ ì½”ë“œëŠ”:
"ë‹¤ìŒ í•¸ë“¤ëŸ¬ê°€ ìˆë‹¤ë©´, ê·¸ í•¸ë“¤ëŸ¬ì—ê²Œ ìš”ì²­ì„ ë„˜ê²¨ì¤˜."
ë¼ëŠ” ì˜ë¯¸.

#### ğŸ”§ ë” ì§ê´€ì ì¸ ë²„ì „ìœ¼ë¡œ ë°”ê¾¸ë©´?
if let Some(next) = &self.next {
    next.handle(req);
}
ì´ë ‡ê²Œ ì¨ë„ ë˜‘ê°™ì´ ë™ì‘í•´. ref ëŒ€ì‹  &ë¥¼ ì¨ì„œ ì°¸ì¡°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ì„ ì„ í˜¸.

#### ğŸ§ª ì˜ˆì‹œ íë¦„
- AuthHandlerê°€ ìš”ì²­ì„ ë°›ìŒ
- ì¸ì¦ ì„±ê³µ â†’ self.nextê°€ Some(LogHandler)
- LogHandler.handle(req) í˜¸ì¶œë¨
- ë¡œê·¸ ì²˜ë¦¬ í›„ â†’ self.nextê°€ Some(EventFilterHandler)
- ì´ë²¤íŠ¸ í•„í„°ë§ ì²˜ë¦¬ë¨
ì´ë ‡ê²Œ ì²´ì¸ì„ ë”°ë¼ ìš”ì²­ì´ í˜ëŸ¬ê°.



## ğŸ§­ Mermaid í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
```mermaid
classDiagram
    class Handler {
        <<interface>>
        +set_next(handler)
        +handle(request)
    }

    class LevelOne {
        +handle(request)
    }

    class LevelTwo {
        +handle(request)
    }

    class Request {
        +level: u32
    }

    Handler <|.. LevelOne
    Handler <|.. LevelTwo
    LevelOne --> Handler : next
    LevelTwo --> Handler : next
```


## ğŸŒ ë‹¤ë¥¸ ì–¸ì–´ ì˜ˆì œë“¤
### ğŸŸ¦ Java
```java
class Request {
    int level;
    Request(int level) { this.level = level; }
}

abstract class Handler {
    protected Handler next;
    public void setNext(Handler next) { this.next = next; }
    public abstract void handle(Request req);
}

class LevelOne extends Handler {
    public void handle(Request req) {
        if (req.level <= 1)
            System.out.println("LevelOne ì²˜ë¦¬");
        else if (next != null)
            next.handle(req);
    }
}

public class Main {
    public static void main(String[] args) {
        Handler h1 = new LevelOne();
        Handler h2 = new LevelOne(); // ì˜ˆì‹œìš©ìœ¼ë¡œ ë‘ ë²ˆ ì‚¬ìš©
        h1.setNext(h2);
        h1.handle(new Request(2));
    }
}
```


### ğŸ Python
```python
class Request:
    def __init__(self, level):
        self.level = level

class Handler:
    def __init__(self):
        self.next = None

    def set_next(self, handler):
        self.next = handler

    def handle(self, req):
        raise NotImplementedError

class LevelOne(Handler):
    def handle(self, req):
        if req.level <= 1:
            print("LevelOne ì²˜ë¦¬")
        elif self.next:
            self.next.handle(req)

if __name__ == "__main__":
    h1 = LevelOne()
    h2 = LevelOne()
    h1.set_next(h2)
    h1.handle(Request(2))
```


### ğŸ§Š C++
```cpp
#include <iostream>

class Request {
public:
    int level;
    Request(int l) : level(l) {}
};

class Handler {
protected:
    Handler* next;
public:
    Handler() : next(nullptr) {}
    void setNext(Handler* h) { next = h; }
    virtual void handle(Request* req) = 0;
};

class LevelOne : public Handler {
public:
    void handle(Request* req) override {
        if (req->level <= 1)
            std::cout << "LevelOne ì²˜ë¦¬\n";
        else if (next)
            next->handle(req);
    }
};

int main() {
    LevelOne h1, h2;
    h1.setNext(&h2);
    Request req(2);
    h1.handle(&req);
}
```


### ğŸŸª C#
```csharp
using System;

class Request {
    public int Level { get; }
    public Request(int level) => Level = level;
}

abstract class Handler {
    protected Handler next;
    public void SetNext(Handler h) => next = h;
    public abstract void Handle(Request req);
}

class LevelOne : Handler {
    public override void Handle(Request req) {
        if (req.Level <= 1)
            Console.WriteLine("LevelOne ì²˜ë¦¬");
        else if (next != null)
            next.Handle(req);
    }
}

class Program {
    static void Main() {
        var h1 = new LevelOne();
        var h2 = new LevelOne();
        h1.SetNext(h2);
        h1.Handle(new Request(2));
    }
}
```


## âœ… ìš”ì•½ ë¹„êµ
| ì–¸ì–´   | êµ¬í˜„ ë°©ì‹                  | ì²´ì¸ ì—°ê²° ë°©ì‹     | íŠ¹ì§•                         |
|--------|----------------------------|--------------------|------------------------------|
| Rust   | íŠ¸ë ˆì´íŠ¸ + Box             | `set_next()`       | ì•ˆì „í•œ ì†Œìœ ê¶Œ ê´€ë¦¬           |
| Java   | ì¶”ìƒ í´ë˜ìŠ¤ ìƒì†           | `setNext()`        | ëª…í™•í•œ êµ¬ì¡°, ë‹¤í˜•ì„± í™œìš©     |
| Python | í´ë˜ìŠ¤ + ë™ì  ë°”ì¸ë”©       | `set_next()`       | ìœ ì—°í•œ êµ¬ì¡°, ê°„ê²°í•œ ë¬¸ë²•     |
| C++    | ì¶”ìƒ í´ë˜ìŠ¤ + í¬ì¸í„°       | `setNext()`        | ìˆ˜ë™ ë©”ëª¨ë¦¬ ê´€ë¦¬ í•„ìš”        |
| C#     | ì¶”ìƒ í´ë˜ìŠ¤ + ì†ì„±         | `SetNext()`        | ì´ë²¤íŠ¸ ê¸°ë°˜ í™•ì¥ ê°€ëŠ¥        |


ì±…ì„ ì—°ì‡„ íŒ¨í„´ì€ ì¡°ê±´ ë¶„ê¸° ë¡œì§ì„ ê°ì²´ë¡œ ë¶„ë¦¬í•´ì„œ ì²˜ë¦¬ íë¦„ì„ ìœ ì—°í•˜ê²Œ í•¨.
Build íŒ¨í„´ì²˜ëŸ¼ ë‹¨ê³„ë³„ë¡œ ì²˜ë¦¬ë˜ì§€ë§Œ, ê° ë‹¨ê³„ê°€ ë™ì ìœ¼ë¡œ ê²°ì •ë˜ê³ , ì²˜ë¦¬ ì±…ì„ì„ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ë” ê°•ë ¥.


---

## ğŸ¦€ Rust ì½”ë“œ ì˜ˆì œ (Vec ê¸°ë°˜ ì²˜ë¦¬)
```rust
struct Request {
    user: String,
    role: String,
    event: String,
}

trait Handler {
    fn handle(&self, req: &Request) -> bool;
}

struct AuthHandler;

impl Handler for AuthHandler {
    fn handle(&self, req: &Request) -> bool {
        if req.role == "admin" {
            println!("âœ… ì¸ì¦ ì„±ê³µ: {}", req.user);
            true
        } else {
            println!("âŒ ì¸ì¦ ì‹¤íŒ¨: {}", req.user);
            false
        }
    }
}

struct LogHandler;

impl Handler for LogHandler {
    fn handle(&self, req: &Request) -> bool {
        println!("ğŸ“ ë¡œê·¸ ê¸°ë¡: ì‚¬ìš©ì={}, ì´ë²¤íŠ¸={}", req.user, req.event);
        true
    }
}

struct EventFilterHandler;

impl Handler for EventFilterHandler {
    fn handle(&self, req: &Request) -> bool {
        if req.event == "click" {
            println!("âš¡ ì´ë²¤íŠ¸ ì²˜ë¦¬: {}", req.event);
            true
        } else {
            println!("ğŸš« ì´ë²¤íŠ¸ ë¬´ì‹œ: {}", req.event);
            false
        }
    }
}

fn main() {
    let handlers: Vec<Box<dyn Handler>> = vec![
        Box::new(AuthHandler),
        Box::new(LogHandler),
        Box::new(EventFilterHandler),
    ];

    let req = Request {
        user: "JungHwan".to_string(),
        role: "admin".to_string(),
        event: "click".to_string(),
    };

    for handler in &handlers {
        let proceed = handler.handle(&req);
        if !proceed {
            println!("â›” ì²´ì¸ ì¤‘ë‹¨ë¨");
            break;
        }
    }
}
```


##  ğŸ” í•µì‹¬ ë³€ê²½ì 
| ê¸°ì¡´ ë°©ì‹         | Vec ê¸°ë°˜ ë°©ì‹               |
|------------------|-----------------------------|
| `set_next()`      | `Vec<Box<dyn Handler>>`ë¡œ í•¸ë“¤ëŸ¬ ë¦¬ìŠ¤íŠ¸ êµ¬ì„± |
| `next.handle(req)`| `for` ë£¨í”„ë¡œ ìˆœì°¨ ì²˜ë¦¬      |
| `None`            | `handle()`ì˜ ë°˜í™˜ê°’ìœ¼ë¡œ ì²˜ë¦¬ ì—¬ë¶€ ê²°ì • |



## ğŸ§­ Mermaid í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
```mermaid
classDiagram
    class Handler {
        <<interface>>
        +handle(request): bool
    }

    class AuthHandler {
        +handle(request): bool
    }

    class LogHandler {
        +handle(request): bool
    }

    class EventFilterHandler {
        +handle(request): bool
    }

    class Request {
        +user: String
        +role: String
        +event: String
    }

    Handler <|.. AuthHandler
    Handler <|.. LogHandler
    Handler <|.. EventFilterHandler
```


## âœ… ìš”ì•½
| ì²˜ë¦¬ ë‹¨ê³„            | ì—­í•  ì„¤ëª…                         |
|----------------------|-----------------------------------|
| `AuthHandler`         | ì‚¬ìš©ì ì¸ì¦ (admin ì—¬ë¶€ í™•ì¸)     |
| `LogHandler`          | ìš”ì²­ ì •ë³´ ë¡œê¹…                    |
| `EventFilterHandler`  | ì´ë²¤íŠ¸ íƒ€ì… í•„í„°ë§ ë° ì²˜ë¦¬        |
| `Vec<Box<dyn Handler>>` | í•¸ë“¤ëŸ¬ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰       |



---


## ì‹¤ì „ ì˜ˆì œ

**ì±…ì„ ì—°ì‡„ íŒ¨í„´ (Chain of Responsibility)**ì„ Rustì—ì„œ ì‹¤ì œ ì‹œë‚˜ë¦¬ì˜¤ì— ì ìš©.

## ì£¼ì œëŠ” ë‹¤ìŒ ì„¸ ê°€ì§€:
- âœ… ì¸ì¦ ì²˜ë¦¬ (Authentication)
- ğŸ“ ë¡œê¹… (Logging)
- âš¡ ì´ë²¤íŠ¸ í•„í„°ë§ (Event Filtering)
ê° ì²˜ë¦¬ ë‹¨ê³„ëŠ” Handler ì²´ì¸ìœ¼ë¡œ ì—°ê²°ë˜ê³ , ìš”ì²­(Request)ì„ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ê±°ë‚˜ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ê¹ë‹ˆë‹¤.

## ğŸ§± êµ¬ì¡° ê°œìš”
- Request: ì‚¬ìš©ì ìš”ì²­ ì •ë³´ (ì˜ˆ: ì‚¬ìš©ì ì´ë¦„, ê¶Œí•œ, ì´ë²¤íŠ¸ íƒ€ì… ë“±)
- Handler: ì²˜ë¦¬ íŠ¸ë ˆì´íŠ¸
- AuthHandler: ì¸ì¦ ì²˜ë¦¬
- LogHandler: ë¡œê¹… ì²˜ë¦¬
- EventFilterHandler: ì´ë²¤íŠ¸ í•„í„°ë§
- main(): ì²´ì¸ êµ¬ì„± ë° ì‹¤í–‰

## ğŸ¦€ Rust ì½”ë“œ ì˜ˆì œ
```rust
struct Request {
    user: String,
    role: String,
    event: String,
}

trait Handler {
    fn set_next(&mut self, next: Box<dyn Handler>);
    fn handle(&self, req: &Request);
}

struct AuthHandler {
    next: Option<Box<dyn Handler>>,
}

impl AuthHandler {
    fn new() -> Self {
        AuthHandler { next: None }
    }
}

impl Handler for AuthHandler {
    fn set_next(&mut self, next: Box<dyn Handler>) {
        self.next = Some(next);
    }

    fn handle(&self, req: &Request) {
        if req.role == "admin" {
            println!("âœ… ì¸ì¦ ì„±ê³µ: {}", req.user);
            if let Some(ref next) = self.next {
                next.handle(req);
            }
        } else {
            println!("âŒ ì¸ì¦ ì‹¤íŒ¨: {}", req.user);
        }
    }
}

struct LogHandler {
    next: Option<Box<dyn Handler>>,
}

impl LogHandler {
    fn new() -> Self {
        LogHandler { next: None }
    }
}

impl Handler for LogHandler {
    fn set_next(&mut self, next: Box<dyn Handler>) {
        self.next = Some(next);
    }

    fn handle(&self, req: &Request) {
        println!("ğŸ“ ë¡œê·¸ ê¸°ë¡: ì‚¬ìš©ì={}, ì´ë²¤íŠ¸={}", req.user, req.event);
        if let Some(ref next) = self.next {
            next.handle(req);
        }
    }
}

struct EventFilterHandler {
    next: Option<Box<dyn Handler>>,
}

impl EventFilterHandler {
    fn new() -> Self {
        EventFilterHandler { next: None }
    }
}

impl Handler for EventFilterHandler {
    fn set_next(&mut self, next: Box<dyn Handler>) {
        self.next = Some(next);
    }

    fn handle(&self, req: &Request) {
        if req.event == "click" {
            println!("âš¡ ì´ë²¤íŠ¸ ì²˜ë¦¬: {}", req.event);
        } else {
            println!("ğŸš« ì´ë²¤íŠ¸ ë¬´ì‹œ: {}", req.event);
        }

        if let Some(ref next) = self.next {
            next.handle(req);
        }
    }
}

fn main() {
    let mut auth = AuthHandler::new();
    let mut logger = LogHandler::new();
    let mut filter = EventFilterHandler::new();

    // ì²´ì¸ ì—°ê²°: Auth â†’ Logger â†’ Filter
    auth.set_next(Box::new(logger));
    logger.set_next(Box::new(filter));

    let req = Request {
        user: "JungHwan".to_string(),
        role: "admin".to_string(),
        event: "click".to_string(),
    };

    auth.handle(&req);
}
```


## ğŸ§­ Mermaid í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
```mermaid
classDiagram
    class Handler {
        <<interface>>
        +set_next(handler)
        +handle(request)
    }

    class AuthHandler {
        +handle(request)
    }

    class LogHandler {
        +handle(request)
    }

    class EventFilterHandler {
        +handle(request)
    }

    class Request {
        +user: String
        +role: String
        +event: String
    }

    Handler <|.. AuthHandler
    Handler <|.. LogHandler
    Handler <|.. EventFilterHandler
    AuthHandler --> Handler : next
    LogHandler --> Handler : next
    EventFilterHandler --> Handler : next
```


## âœ… ìš”ì•½
| ì²˜ë¦¬ ë‹¨ê³„            | ì—­í•  ì„¤ëª…                         |
|----------------------|-----------------------------------|
| `AuthHandler`         | ì‚¬ìš©ì ì¸ì¦ (ì˜ˆ: admin ì—¬ë¶€ í™•ì¸) |
| `LogHandler`          | ìš”ì²­ ì •ë³´ ë¡œê¹…                    |
| `EventFilterHandler`  | ì´ë²¤íŠ¸ íƒ€ì… í•„í„°ë§ ë° ì²˜ë¦¬        |



